<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Progress Bar</title>
  </head>
  <body>
    <h1 style="font-weight: 400;">
      Hurry Only
      <span id="demo"></span>
      left in Stock
    </h1>

    <div class="progress" style="background-color: #d8d8d8;
    border-radius: 20px;
    position: relative;
    margin: 15px 0;
    height: 10px;
    width: 18rem;"
    >
      <div class="progress-done" style=" background: rgb(65, 168, 221);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      width: 100%;
      opacity: 0;
      transition: 1s ease 0.3s;
    ">
        &nbsp;
      </div>
    </div>
  </body>

  <script src="main.js"></script>

  <script>
    const progress = document.querySelector(".progress-done");

    progress.style.width = progress.getAttribute("data-done") + "%";
    progress.style.opacity = 1;

    setInterval(() => {
      products = products - 1;
      move();
    }, 3000);

    let products = 20;

    function move() {
      var elem = document.getElementById("progress-done");
      console.log(products);

      var width = 4;

      switch (products) {
        // case 0:
        //   barWidth = 0;
        //   break;
        // case 1:
        //   barWidth = 5;
        //   break;
        // case 2:
        //   barWidth = 10;
        //   break;
        // case 3:
        //   barWidth = 15;
        //   break;
        // case 4:
        //   barWidth = 20;
        //   break;
        // case 5:
        //   barWidth = 25;
        //   break;
        case 6:
          barWidth = 30;
          break;
        case 7:
          barWidth = 35;
          break;
        case 8:
          barWidth = 40;
          break;
        case 9:
          barWidth = 45;
          break;
        case 10:
          barWidth = 50;
          break;
        case 11:
          barWidth = 55;
          break;
        case 12:
          barWidth = 60;
          break;
        case 13:
          barWidth = 65;
          break;
        case 14:
          barWidth = 70;
          break;
        case 15:
          barWidth = 75;
          break;
        case 16:
          barWidth = 80;
          break;
        case 17:
          barWidth = 85;
          break;
        case 18:
          barWidth = 90;
          break;
        case 19:
          barWidth = 95;
          break;
        case 20:
          barWidth = 100;
          break;
      }

      var id = setInterval(frame, 2);
      function frame() {
        if (width > barWidth) {
          clearInterval(id);
          products = barWidth / 5;
        } else {
          width++;
          progress.style.width = width + "%";
          document.getElementById("demo").innerHTML = products * 1;
        }
      }
    }
  </script>
</html>
